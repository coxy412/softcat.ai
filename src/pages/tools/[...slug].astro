---
import PostLayout from '../../layouts/PostLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('tools');
  return entries.map((entry) => ({
    params: { slug: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<PostLayout
  title={entry.data.title}
  tags={entry.data.tags}
  summary={entry.data.description}
  backLink="/tools"
  backLabel="Tools & Experiments"
>
  <Content />

  <div class="mt-10 pt-6 border-t border-surface-light">
    {entry.data.labUrl ? (
      <a href={entry.data.labUrl} class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-neon-green/10 border border-neon-green/30 font-mono text-sm text-neon-green hover:bg-neon-green/20 transition-all">
        Try it in the lab &rarr;
      </a>
    ) : (
      <p class="font-mono text-sm text-text-muted">
        No lab tool for this one yet. <a href="/lab" class="text-neon-cyan hover:underline">Browse the lab</a> for interactive tools.
      </p>
    )}
  </div>
</PostLayout>
